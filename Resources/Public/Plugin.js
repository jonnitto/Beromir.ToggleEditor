(()=>{var le=Object.create;var ht=Object.defineProperty;var ae=Object.getOwnPropertyDescriptor;var ne=Object.getOwnPropertyNames;var se=Object.getPrototypeOf,ge=Object.prototype.hasOwnProperty;var ce=(t,e)=>()=>(t&&(e=t(t=0)),e);var D=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var be=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of ne(e))!ge.call(t,a)&&a!==r&&ht(t,a,{get:()=>e[a],enumerable:!(o=ae(e,a))||o.enumerable});return t};var G=(t,e,r)=>(r=t!=null?le(se(t)):{},be(e||!t||!t.__esModule?ht(r,"default",{value:t,enumerable:!0}):r,t));function O(t){return(...e)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${t}`])return window["@Neos:HostPluginAPI"][`@${t}`](...e);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var V=ce(()=>{});var Y=D((je,Bt)=>{V();Bt.exports=O("vendor")().React});var vt=D((Me,Xt)=>{V();Xt.exports=O("vendor")().PropTypes});var Wt=D((Ke,Zt)=>{V();Zt.exports=O("NeosProjectPackages")().NeosUiReduxStore});var at=D(($e,wt)=>{V();wt.exports=O("NeosProjectPackages")().NeosUiDecorators});var Vt=D((eo,zt)=>{V();zt.exports=O("vendor")().reactRedux});var nt=D((ao,kt)=>{V();kt.exports=O("NeosProjectPackages")().ReactUiComponents});V();var de=(t,e="position",r="key")=>{let o=typeof e=="string"?g=>g[e]:e,a={},c={},m={},I={},f={},A={};t.forEach((g,h)=>{let d=g[r]?g[r]:String(h);a[d]=h;let B=o(g),y=String(B||h),J=!1;if(y.startsWith("start")){let u=y.match(/start\s+(\d+)/),p=u&&u[1]?Number(u[1]):0;m[p]||(m[p]=[]),m[p].push(d)}else if(y.startsWith("end")){let u=y.match(/end\s+(\d+)/),p=u&&u[1]?Number(u[1]):0;I[p]||(I[p]=[]),I[p].push(d)}else if(y.startsWith("before")){let u=y.match(/before\s+(\S+)(\s+(\d+))?/);if(!u)J=!0;else{let p=u[1],Z=u[3]?Number(u[3]):0;f[p]||(f[p]={}),f[p][Z]||(f[p][Z]=[]),f[p][Z].push(d)}}else if(y.startsWith("after")){let u=y.match(/after\s+(\S+)(\s+(\d+))?/);if(!u)J=!0;else{let p=u[1],Z=u[3]?Number(u[3]):0;A[p]||(A[p]={}),A[p][Z]||(A[p][Z]=[]),A[p][Z].push(d)}}else J=!0;if(J){let u=parseFloat(y);(isNaN(u)||!isFinite(u))&&(u=h),c[u]||(c[u]=[]),c[u].push(d)}});let N=[],S=[],k=[],L=[],v=(g,h)=>{let d=Object.keys(g).map(B=>Number(B)).sort((B,y)=>B-y);return h?d:d.reverse()},W=(g,h)=>{g.forEach(d=>{if(!(L.indexOf(d)>=0)){if(L.push(d),f[d]){let B=v(f[d],!0);for(let y of B)W(f[d][y],h)}if(h.push(d),A[d]){let B=v(A[d],!1);for(let y of B)W(A[d][y],h)}}})};for(let g of v(m,!1))W(m[g],N);for(let g of v(c,!0))W(c[g],S);for(let g of v(I,!0))W(I[g],k);for(let g of Object.keys(f))if(!(L.indexOf(g)>=0))for(let h of v(f[g],!1))W(f[g][h],N);for(let g of Object.keys(A))if(!(L.indexOf(g)>=0))for(let h of v(A[g],!1))W(A[g][h],S);return[...N,...S,...k].map(g=>a[g]).map(g=>t[g])},mt=de;var Ot=O("manifest");var s=G(Y()),l=G(vt()),Tt=G(Wt()),Rt=G(at());var jt=G(Vt());var F=G(Y());var z=G(Y());function Yt({style:t,className:e,size:r=30}){return z.default.createElement("svg",{width:r,height:r,stroke:"currentColor",viewBox:"0 0 24 24",style:t,className:e},z.default.createElement("g",null,z.default.createElement("circle",{cx:"12",cy:"12",r:"9.5",fill:"none","stroke-width":"2","stroke-linecap":"round"},[{attribute:"dasharray",values:"0 150;42 150;42 150;42 150"},{attribute:"dashoffset",values:"0;-16;-59;-59"}].map(({attribute:o,values:a})=>z.default.createElement("animate",{key:o,attributeName:`stroke-${o}`,values:a,dur:"1.5s",calcMode:"spline",keyTimes:"0;0.475;0.95;1",keySplines:"0.42,0,0.58,1;0.42,0,0.58,1;0.42,0,0.58,1",repeatCount:"indefinite"}))),z.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:"2s",values:"0 12 12;360 12 12",repeatCount:"indefinite"})))}function Ft({style:t,className:e,size:r=30}){return z.default.createElement("svg",{width:r*2,height:r,viewBox:"0 0 24 12",class:e,style:t},[1,2,3].map(o=>{let a=o*6,c=Math.round(100/3*(o-1))/100;return z.default.createElement("circle",{cx:a,cy:"6",r:"0",fill:"currentColor"},z.default.createElement("animate",{attributeName:"r",begin:c,calcMode:"spline",dur:"1.5s",keySplines:"0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8",repeatCount:"indefinite",values:"0;2;0;0"}))}))}var Nt=G(at()),It={container:(t=1)=>({display:"grid",gridTemplate:"'content' 1fr / 1fr",alignItems:"center",justifyItems:"center",width:"100%",minHeight:`calc(var(--spacing-GoldenUnit) * ${t})`}),item:(t=!1)=>({gridArea:"content",transition:"opacity var(--transition-Default), transform var(--transition-Default) ease",opacity:t?1:0,transform:`scale(${t?1:0})`})};function me({id:t,title:e="Neos.Neos:Main:loading",isLoading:r=!1,delayTime:o=500,timeoutTime:a=5e3,i18nRegistry:c,heightMultiplier:m=1,width:I=60}){let[f,A]=(0,F.useState)(0),N=e?c.translate(e):null;return(0,F.useEffect)(()=>{if(!r){A(0);return}let S=setTimeout(()=>{A(1)},o),k=setTimeout(()=>{A(2)},o+a);return()=>{clearTimeout(S),clearTimeout(k)}},[r]),r?F.default.createElement("div",{id:t,style:It.container(m),title:N},F.default.createElement(Yt,{size:I/2,style:It.item(f==1)}),F.default.createElement(Ft,{size:I/2,style:It.item(f==2)})):null}var Ie=(0,Nt.neos)(t=>({i18nRegistry:t.get("i18n")})),St=Ie(me);var st=G(nt());var Q=G(Y()),K=G(nt());var n={image:"beromir-toggleeditor-blateq-image",colorBox:"beromir-toggleeditor-blateq-colorBox",highlight:"beromir-toggleeditor-blateq-highlight",color:"beromir-toggleeditor-blateq-color",colorButton:"beromir-toggleeditor-blateq-colorButton",content:"beromir-toggleeditor-blateq-content",transition:"beromir-toggleeditor-blateq-transition",imageSVG:"beromir-toggleeditor-blateq-imageSVG",list:"beromir-toggleeditor-blateq-list",error:"beromir-toggleeditor-blateq-error",grid:"beromir-toggleeditor-blateq-grid",flex1:"beromir-toggleeditor-blateq-flex1",radio:"beromir-toggleeditor-blateq-radio",colorTransparent:"beromir-toggleeditor-blateq-colorTransparent",colorPreviewLast:"beromir-toggleeditor-blateq-colorPreviewLast",wrapper:"beromir-toggleeditor-blateq-wrapper",allowEmpty:"beromir-toggleeditor-blateq-allowEmpty","flex-start":"beromir-toggleeditor-blateq-flex-start",colorPreview:"beromir-toggleeditor-blateq-colorPreview",button:"beromir-toggleeditor-blateq-button",selected:"beromir-toggleeditor-blateq-selected",layered:"beromir-toggleeditor-blateq-layered",allowEmptyRadio:"beromir-toggleeditor-blateq-allowEmptyRadio",label:"beromir-toggleeditor-blateq-label",listButton:"beromir-toggleeditor-blateq-listButton",allowEmptyShow:"beromir-toggleeditor-blateq-allowEmptyShow",imageFull:"beromir-toggleeditor-blateq-imageFull",disabled:"beromir-toggleeditor-blateq-disabled",flex:"beromir-toggleeditor-blateq-flex",buttonCurrent:"beromir-toggleeditor-blateq-buttonCurrent"};function Lt(t){var e,r,o="";if(typeof t=="string"||typeof t=="number")o+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=Lt(t[e]))&&(o&&(o+=" "),o+=r)}else for(r in t)t[r]&&(o&&(o+=" "),o+=r);return o}function pe(){for(var t,e,r=0,o="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=Lt(t))&&(o&&(o+=" "),o+=e);return o}var X=pe;var Ht=t=>Dt("preview",t),Jt=t=>Dt("icon",t);function H(t,e,r=!1,o=c=>c,a=""){let c=`${e}Active${a}`,m=t[e+a],I=t[c];return r&&I===void 0&&(I=m),m==null&&I==null?null:{default:o(m),active:o(I)}}function qt(t,e){if(!t||typeof t!="object")return[];let r=[];for(let o in t){let a=t[o];a.hidden||r.push({...a,value:o,key:o==""?"__empty__":o})}return e==="color"?pt(r):r}function pt(t){return Array.isArray(t)?(t=t.map(e=>({...e,color:Ce(e.color)})).filter(e=>e.color),t):[]}function Ce(t){return!t||typeof t!="string"&&!Array.isArray(t)?null:typeof t=="string"?[t]:(t=t.filter(Boolean),t.length<1?null:t)}function Dt(t,e){if(!e)return null;let r=H(e,t);if(!r)return null;let o=r.default&&r.active,a=H(e,t,!0,I=>`rotate(${I||0}deg)`,"Rotate"),c=H("label",t,!0),m=H("description",!0);return{type:t,needLayering:o,state:r,label:c,description:m,rotate:a}}function U({item:t,size:e,isCurrent:r}){let o=Jt(t);if(!o)return null;let{state:a,rotate:c,needLayering:m}=o;return m?Q.default.createElement("span",{className:n.layered},Q.default.createElement(K.Icon,{icon:a.default,className:n.transition,style:{opacity:r?0:1,transform:c?.default},size:e}),Q.default.createElement(K.Icon,{icon:a.active,className:n.transition,style:{opacity:r?1:0,transform:c?.active},size:e})):a.default?Q.default.createElement(K.Icon,{icon:a.default,className:n.transition,style:{transform:r?c?.active:c?.default},size:e}):a.active&&r?Q.default.createElement(K.Icon,{icon:a.active,style:{transform:c?.active},size:e}):null}var T=G(Y());var Ct=G(Y()),Qt=G(at());var fe=(0,Qt.neos)(t=>({i18nRegistry:t.get("i18n")})),_=fe(Ae);function Ae({src:t,className:e,style:r,label:o,i18nRegistry:a}){let c=a.translate(o);return t.startsWith("<svg ")?Ct.default.createElement("div",{className:X(n.transition,n.imageSVG,e),style:r,"aria-label":c,dangerouslySetInnerHTML:{__html:t}}):Ct.default.createElement("img",{className:X(n.transition,n.image,e),style:r,alt:c,src:t.startsWith("resource://")?`/_Resources/Static/Packages/${t.substr(11)}`:t})}function R({item:t,isCurrent:e}){let r=Ht(t);if(!r)return null;let{state:o,rotate:a,needLayering:c,label:m,description:I}=r,f=t.previewFull?n.imageFull:null;return r.needLayering?T.default.createElement("span",{className:n.layered},T.default.createElement(_,{src:o.default,className:f,style:{opacity:e?0:1,transform:a?.default},label:I?.default||m?.default}),T.default.createElement(_,{src:o.active,className:f,style:{opacity:e?1:0,transform:a?.active},label:I?.active||m?.active})):o.default?T.default.createElement(_,{src:o.default,className:f,style:{transform:e?a?.active:a?.default},label:I?.default||m?.default}):o.active&&e?T.default.createElement(_,{src:o.active,className:f,style:{transform:a?.active},label:I?.active||m?.active}):null}var $=G(Y()),Ut=G(nt());function j({children:t,label:e,id:r,className:o,title:a,style:c,renderHelpIcon:m}){return t?$.default.createElement($.default.Fragment,null,e&&$.default.createElement(Ut.Label,{htmlFor:r},e," ",m()),$.default.createElement("div",{id:r,className:X(n.wrapper,o),style:c,title:a},t)):null}var ye=t=>({contextNodePath:t.focusedNodePath,dataSourceIdentifier:t.options.dataSourceIdentifier,dataSourceUri:t.options.dataSourceUri,dataSourceAdditionalData:t.options.dataSourceAdditionalData,dataSourceDisableCaching:!!t.options.dataSourceDisableCaching}),xe={layout:"grid",maximalColumns:4,values:{},columns:null,allowEmpty:!1,emptyValue:"",multiple:!1,iconSize:null,disabled:!1,hidden:!1,dataSourceIdentifier:null,dataSourceUri:null,labelCustomStyle:null,buttonCustomStyle:null,wrapperCustomStyle:null};function Et({value:t,commit:e,highlight:r,i18nRegistry:o,id:a,dataSourcesDataLoader:c,renderHelpIcon:m,...I}){let f={...xe,...I.options},{layout:A,values:N,columns:S,maximalColumns:k,emptyValue:L,iconSize:v,disabled:W,dataSourceIdentifier:tt,dataSourceUri:g,dataSourceAdditionalData:h,multiple:d,labelCustomStyle:B,buttonCustomStyle:y,wrapperCustomStyle:J}=f,u=d||f.allowEmpty,p=o.translate(I.label),[Z,Pt]=(0,s.useState)([]);(0,s.useEffect)(()=>{r||Pt(Array.isArray(t)?t:[t])},[r]),d&&!Array.isArray(t)&&console.warn(`Misconfiguration in property "${I.identifier}". Multiple is activated but value type seems to be "string" or "integer" but should be "array".`);let et=!!(tt||g),[ft,Kt]=(0,s.useState)(et),[E,gt]=(0,s.useState)(et?[]:qt(N,A,o)),[ot,At]=(0,s.useState)(Array.isArray(t)?t:[t]),[_t,$t]=(0,s.useState)(null);if((0,s.useEffect)(()=>{let i=JSON.stringify({dataSourceIdentifier:tt,dataSourceUri:g,dataSourceAdditionalData:h});!et||_t===i||($t(i),c.resolveValue(ye(I),t).then(C=>{if(Kt(!1),C.hidden){gt({hidden:!0});return}if(C=C.map(b=>({key:b.value==""?"__empty__":b.value,...b})),A==="color"){gt(pt(C));return}gt(C)}))},[tt,g,h]),ft)return s.default.createElement(j,{id:a,label:p,renderHelpIcon:m},s.default.createElement(St,{isLoading:ft,title:"Beromir.ToggleEditor:Main:loading"}));if(E.hidden)return null;if(!E||!E.length)return s.default.createElement(j,{id:a,label:p,className:n.error,renderHelpIcon:m},o.translate(`Beromir.ToggleEditor:Main:error.${et?"noDataFromSource":"noNodeTypeDefintion"}`));function te(i){if(JSON.stringify(ot)===JSON.stringify(Z))return!1;let C=Z.includes(i.value);if(!ot.length)return C;let b=ct(i);return d?b&&!C||C&&!b:b}function ct(i){return ot.includes(i.value)}function rt(i,C){if(C&&C.blur(),!i){e(d?[]:L),At([]);return}let b=i.value,x=[...ot],M=x.includes(b);d?M?x.splice(x.indexOf(b),1):x.push(b):x=M?[]:[b],!(!u&&x.length===0)&&(At(x),d||(x=x[0]||L),e(x))}let yt=(i,C=0)=>{if(typeof i=="number"&&i>0)return i;let b=E.length||1;if(!i||typeof i!="string")return b;try{return i=i.replaceAll("{items}",b),C&&(i=i.replaceAll("{maximalColumns}",b)),new Function(`return Math.floor(${i})`)()}catch(x){console.warn('An error occurred while trying to evaluate "'+i+`"
`,x)}},ee=()=>{let i=yt(S,k),C=yt(k);return{"--columns":Math.min(i,C)}},oe=o.translate("Beromir.ToggleEditor:Main:reset"),bt=({item:i,className:C=n.allowEmpty})=>u&&!d?s.default.createElement("span",{className:X(C,ct(i)&&n.allowEmptyShow)},s.default.createElement(st.Icon,{size:"sm",icon:"times"})):null;return s.default.createElement(j,{id:a,label:p,className:[n[A],W&&n.disabled],style:{...J||{},...ee()},renderHelpIcon:m},mt(E).map((i,C)=>{let b=ct(i),x=i.disabled,M=b?"active":"default",re=H(i,"label",!0,P=>o.translate(P)),ie=H(i,"description",!0,P=>o.translate(P)),w=re?.[M],dt=ie?.[M],ut=dt||w,it=b&&u?oe:ut,lt=te(i)&&n.highlight;switch(A){case"list":return d?s.default.createElement("label",{className:X(n.listButton,lt),title:dt,"aria-label":it,style:i.buttonCustomStyle||y||{},key:`list-multiple-${C}`},s.default.createElement(st.CheckBox,{isChecked:b,disabled:x,onChange:()=>rt(i)}),s.default.createElement(U,{item:i,isCurrent:b,size:v}),s.default.createElement(R,{item:i,isCurrent:b}),w&&s.default.createElement("span",{className:n.flex1,style:i.labelCustomStyle||B||{}},w)):s.default.createElement("button",{onClick:({currentTarget:q})=>rt(i,q),type:"button",title:dt,"aria-label":it,disabled:x,className:X(n.listButton,b&&n.selected,lt),style:i.buttonCustomStyle||y||{},key:`list-single-${C}`},s.default.createElement("span",{className:n.radio},s.default.createElement("span",null)),s.default.createElement(U,{item:i,isCurrent:b,size:v}),s.default.createElement(R,{item:i,isCurrent:b}),w&&s.default.createElement("span",{className:n.flex1,style:i.labelCustomStyle||B||{}},w),s.default.createElement(bt,{item:i,className:n.allowEmptyRadio}));case"color":let P=i.color.length-1;return s.default.createElement("div",{className:n.colorBox,key:`color-${C}`},s.default.createElement("button",{onClick:({currentTarget:q})=>rt(i,q),type:"button",title:ut,"aria-label":it,disabled:x,className:X(n.colorButton,b&&n.selected,lt),style:i.buttonCustomStyle||y||{}},i.color.map((q,xt)=>s.default.createElement("span",{key:`color-${xt}`,className:X(n.colorPreview,q==="transparent"&&n.colorTransparent,P===xt&&n.colorPreviewLast),style:{backgroundColor:q}})),s.default.createElement(bt,{item:i})),w&&s.default.createElement("span",{className:X(n.label,x&&n.disabled)},w));default:return s.default.createElement("button",{onClick:()=>rt(i),title:ut,"aria-label":it,disabled:x,className:X(n.button,b&&n.buttonCurrent,lt),style:i.buttonCustomStyle||y||{},key:`default-${C}`,type:"button"},s.default.createElement(U,{item:i,isCurrent:b,size:v}),s.default.createElement(R,{item:i,isCurrent:b}),w&&s.default.createElement("span",{className:X(i.icon||i.preview?n.label:null),style:i.labelCustomStyle||B||{}},w),s.default.createElement(bt,{item:i}))}}))}Et.propTypes={value:l.default.string,commit:l.default.func.isRequired,i18nRegistry:l.default.object.isRequired,options:l.default.shape({layout:l.default.oneOf(["grid","flex","flex-start","list","color"]),columns:l.default.oneOfType([l.default.string,l.default.number]),maximalColumns:l.default.oneOfType([l.default.string,l.default.number]),allowEmpty:l.default.bool,emptyValue:l.default.string,multiple:l.default.bool,iconSize:l.default.oneOf(["xs","sm","lg","2x","3x"]),labelCustomStyle:l.default.objectOf(l.default.oneOfType([l.default.string,l.default.number])),buttonCustomStyle:l.default.objectOf(l.default.oneOfType([l.default.string,l.default.number])),wrapperCustomStyle:l.default.objectOf(l.default.oneOfType([l.default.string,l.default.number])),values:l.default.objectOf(l.default.shape({label:l.default.string,labelCustomStyle:l.default.objectOf(l.default.oneOfType([l.default.string,l.default.number])),buttonCustomStyle:l.default.objectOf(l.default.oneOfType([l.default.string,l.default.number])),icon:l.default.string,iconRotate:l.default.number,description:l.default.string,color:l.default.oneOfType([l.default.string,l.default.arrayOf(l.default.string)]),hidden:l.default.bool,preview:l.default.string,previewFull:l.default.bool,disabled:l.default.bool})),dataSourceIdentifier:l.default.string,dataSourceUri:l.default.string,dataSourceDisableCaching:l.default.bool,dataSourceAdditionalData:l.default.objectOf(l.default.any)}).isRequired};var he=(0,Rt.neos)(t=>({i18nRegistry:t.get("i18n"),dataSourcesDataLoader:t.get("dataLoaders").get("DataSources")})),Ge=(0,jt.connect)(t=>({focusedNodePath:Tt.selectors.CR.Nodes.focusedNodePathSelector(t)})),Mt=he(Ge(Et));Ot("Beromir.ToggleEditor:Editor",{},t=>{t.get("inspector").get("editors").set("Beromir.ToggleEditor/Editor",{component:Mt,hasOwnLabel:!0})});})();
//# sourceMappingURL=Plugin.js.map
